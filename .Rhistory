NIS <- as.numeric(NIS)
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
}
get_pbfnis(NIS= '111111', MM= 40, AAAA= 2018)
get_pbfnis(NIS= '111111', MM= 10, AAAA= 2018)
errortest <- get_pbfnis(NIS= '111111', MM= 40, AAAA= 2018)
successtest <-get_pbfnis(NIS= '111111', MM= 10, AAAA= 2018)
library(jsonlite)
library(httr)
get_pbfnis <- function(NIS, MM, AAAA){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
NIS <- as.numeric(NIS)
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
}
errortest <- get_pbfnis(NIS= '111111', MM= 10, AAAA= 2001)
library(xml2)
a <- xml2::read_html('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=201805&codigoIbge=3304557&pagina=1
')
a <- read_xml('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=201805&codigoIbge=3304557&pagina=1
')
a <- read_xml('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=201805&codigoIbge=3304557&pagina=1
')
a <- read_xml('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=201805&codigoIbge=3304557&pagina=1')
library(xml2)
a<- read_xml('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=201805&codigoIbge=3304557&pagina=1')
a <- xml2::read_html('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=201805&codigoIbge=3304557&pagina=1
')
?modify_url
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
}
get_pbfnis(3304557, 05, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print('até aqui ok 1')
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
}
get_pbfnis(3304557, 05, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print('até aqui ok 1')
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
read_json(url)
}
a <- get_pbfnis(3304557, 05, 2010, 1)
a <- get_pbfnis(3304557, 05, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print('até aqui ok 1')
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
data <- GET(url)
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print('até aqui ok 1')
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
data <- GET(url)
}
a <- get_pbfnis(3304557, 05, 2010, 1)
View(get_pbfnis)
View(get_pbfnis)
View(a)
a[["url"]]
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print('AAAAMM')
print('até aqui ok 1')
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
data <- GET(url)
}
a <- get_pbfnis(3304557, 05, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
print('até aqui ok 1')
url <- paste('http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?mesAno=',AAAAMM, '&codigoIbge=',IBGECODE,'&pagina=',PAGE, sep="")
data <- GET(url)
}
a <- get_pbfnis(3304557, 05, 2010, 1)
a <- get_pbfnis(3304557, 12, 2010, 1)
View(a)
a[["url"]]
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
params <- list(
codigoIbge <- IBGECODE
mesAno <- AAAAMM
pagina <- PAGE
)
print('até aqui ok 1')
}
source('~/.active-rstudio-document')
a <- get_pbfnis(3304557, 12, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
params <- list(
codigoIbge <- IBGECODE
mesAno <- AAAAMM
pagina <- PAGE
)
print('até aqui ok 1')
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
params <- list(
codigoIbge <- IBGECODE
mesAno <- AAAAMM
pagina <- PAGE)
print('até aqui ok 1')
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
print('até aqui ok 1')
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
params <- list(
codigoIbge = IBGECODE
mesAno = AAAAMM
pagina = PAGE)
print('até aqui ok 1')
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
params <- list(
codigoIbge = IBGECODE
mesAno = AAAAMM
pagina = PAGE)
print('até aqui ok 1')
}
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE){
if(MM > 12){
stop('Input error: MM must be <= 12.')
}
if(AAAA < 2003){
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM<- paste(AAAA, MM, sep="")
print(AAAAMM)
params <- list(
codigoIbge = IBGECODE,
mesAno = AAAAMM,
pagina = PAGE)
print('até aqui ok 1')
}
a <- get_pbfnis(3304557, 12, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "")
print(AAAAMM)
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODE,
pagina = PAGE)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
print('até aqui ok 1')
}
a <- get_pbfnis(3304557, 12, 2010, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "")
print(AAAAMM)
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODE,
pagina = PAGE)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
print('até aqui ok 1')
return(res)
}
a <- get_pbfnis(3304557, 12, 2010, 1)
View(a)
library(dplyr)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "") %>% as.numeric()
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODE,
pagina = PAGE)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
print('até aqui ok 1')
return(res)
}
a <- get_pbfnis(3304557, 12, 2010, 1)
View(a)
"2010" %>% as.numeric()
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "") %>% as.numeric()
IBGECODEN <- IBGECODE %>% as.numeric()
PAGEN <- PAGE %>%  as.numeric()
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODEN,
pagina = PAGEN)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
print('até aqui ok 1')
return(res)
}
a <- get_pbfnis(3304557, 10, 2015, 1)
View(a)
a[["url"]]
View(a[["cookies"]])
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "") %>% as.numeric()
IBGECODEN <- IBGECODE %>% as.numeric()
PAGEN <- PAGE %>%  as.numeric()
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODEN,
pagina = PAGEN)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
conteudo <- content(res, as = "text", encoding = "UTF-8")
return(conteudo)
}
a <- get_pbfnis(3304557, 10, 2015, 1)
a
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "") %>% as.numeric()
IBGECODEN <- IBGECODE %>% as.numeric()
PAGEN <- PAGE %>%  as.numeric()
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODEN,
pagina = PAGEN)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
conteudo <- content(res, as = "text", encoding = "UTF-8")
fin <- jsonlite::fromJSON(conteudo, flatten = TRUE) %>%
data.frame() %>%
dplyr::as_tibble()
return(fin)
}
a <- get_pbfnis(3304557, 10, 2015, 1)
get_pbfnis <- function(IBGECODE, MM, AAAA, PAGE) {
if (MM > 12) {
stop('Input error: MM must be <= 12.')
}
if (AAAA < 2003) {
stop('Input error: PBF was created in 2003, thus, AAAA cannot be < 2003')
}
AAAAMM <- paste(AAAA, MM, sep = "") %>% as.numeric()
IBGECODEN <- IBGECODE %>% as.numeric()
PAGEN <- PAGE %>%  as.numeric()
print('ok 1')
params <- list(mesAno = AAAAMM,
codigoIbge = IBGECODEN,
pagina = PAGEN)
res <- GET(url = 'http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?',
query = params)
print('ok 2')
conteudo <- content(res, as = "text", encoding = "UTF-8")
print('ok 3')
fin <- jsonlite::fromJSON(conteudo, flatten = TRUE) %>%
data.frame() %>%
dplyr::as_tibble()
print('FOI!')
return(fin)
}
a <- get_pbfnis(3304557, 10, 2015, 1)
a
View(a)
TSX <- c('3304557', '3303302')
a <- get_pbfnis(TSX, 10, 2015, 1)
library(devtools)
help(create)
help(build)
library(roxygen2)
roxygenise()
roxygenise("~/Documents/GitFolder/getBolsaFamilia/R/")
roxygenise("~/Documents/GitFolder/getBolsaFamilia/")
library(dplyr)
roxygenise("~/Documents/GitFolder/getBolsaFamilia/")
library(jsonlite)
library(httr)
roxygenise("~/Documents/GitFolder/getBolsaFamilia/")
roxygenise("~/Documents/GitFolder/getBolsaFamilia/")
#' @param IBGECODE IBGE Unique Identifier of the municipality which you want the data. The list of municipalities and its codes might be requested with the function (INSERT FUNCTION THAT COLLECTS MUN-LIST)
#' @param AAAA Year of the Data (AAAA format)
#' @param MM Month of the Data (MM format)
#' @param PAGE Request's page. Default= 1.
#'
#' @return  Tibble with the requested data
#'
#' @example
#' getpbf('3304557', AAAA='2010', MM='05')
#'
getpbf_mun <- function(IBGECODE, AAAA, MM, PAGE) {
if (AAAA < 2003) {
stop("Invalid Input: Program Bolsa Familia was created in 2003, so AAAA cannot be < 2003")
}
if(AAAA < 2012) {
warning('The requested time period data might not be availible!')
}
if (MM > 12) {
stop("Invalid Input: The MM (Months) argument cannot be > 12!")
}
AAAAMM <- paste(AAAA, MM, sep = "") %>% as.numeric()
IBGECODEN <- IBGECODE %>% as.numeric()
PAGEN <- PAGE %>% as.numeric()
path <- "http://www.transparencia.gov.br/api-de-dados/bolsa-familia-por-municipio?"
table <- c()
for (i in IBGECODE) {
request <- httr::GET(url = path,
query = list(
mesAno = AAAAMM,
codigoIbge = i,
pagina = PAGEN
)
)
if(request$status_code != 200){
stop(print('Request Failed: Status Code '), request$status_code)
}
resp <- content(request, as = "text", encoding = "UTF-8")
newRow <- jsonlite::fromJSON(resp, flatten = TRUE) %>%
data.frame()
table <- rbind(table, newRow)
}
return(tibble(table))
}
getpbf('3304557', AAAA='2010', MM='05')
getpbf_mun('3304557', AAAA='2010', MM='05')
getpbf_mun('3304557', AAAA='2010', MM='05', PAGE=1)
getpbf_mun('3304557', AAAA='2015', MM='05', PAGE=1)
View(getpbf_mun)
x <- getpbf_mun('3304557', AAAA='2015', MM='05', PAGE=1)
View(x)
View(x)
roxygenise("~/Documents/GitFolder/getBolsaFamilia/")
setwd("~/Documents/GitFolder/owdbr")
library(getBolsaFamilia)
library(owdbr)
help("owdbr_fies")
help("getpbf_mun")
help(owdbr)
help('owdbr')
help(package::owdbr)
help(package= owdbr)
library(owdbr)
help(owdbr)
roxygen2::roxygenise(package.dir='~/Documents/GitFolder/owdbr/')
install.packages(testthat)
install.packages('testthat')
library(testthat)
roxygen2::roxygenise()
library(dplyr)
library(tibble)
roxygen2::roxygenise()
install.packages(usethis)
install.packages('usethis')
usethis::use_tibble()
usethis::use_tibble()
usethis::use_tibble()
usethis::use_tibble()
usethis_dplyr()
usethis::use_mit_license()
options(usethis.full_name= "João Pedro Oliveira dos Santos")
usethis::use_mit_license()
usethis::use_citation()
roxygen2::roxygenize()
roxygen2::roxygenise()
install.packages('pkgKitten')
roxygen2::roxygenise
roxygen2::roxygenise()
document()
?document
??Document
devtools::document()
document()
devtools::document()
owdbr_getpbf_mun('3304557', AAAA='2015', MM='05', PAGE=1)
x <- owdbr_getpbf_mun('3304557', AAAA='2015', MM='05', PAGE=1)
View(x)
library(owdbr)
help(owdbr_uflist)
help(owdbr_peti)
